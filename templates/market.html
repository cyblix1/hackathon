
{% extends "base.html" %}
{% block title %}Market Page{% endblock %}

{% block content %}

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
        <div class="alert alert-{{category}} alert-dismissable" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="close">
                <span aria-hidden="true">x</span>
            </button>
            {{message}}
        </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
<!-- ========================= SECTION INTRO ========================= -->


<section class="section-intro padding-y">
 {% if data == 0 %}
 {% else%}
    <h1 class="h4 text-gray-900 mb-4">Reminder : Password has Expired</h1>
    <a href="{{ url_for('updatePassword')}}" class="btn btn-primary btn">Update Password</a>
    <hr>
 {% endif %}


    <br>
<h2>Welcome back, {{ name }}!</h2>
<p> Thank You for Shopping with VALA</p>
<!--<p> {{ id }}</p>-->
<!--<p> {{ logintime['login_time'] }}</p>-->
<!--<a href="{{ url_for('logout')}}">Logout</a>-->


<div class="container">
<!--    <form>-->

<!--        <div class="input-group">-->
<!--            <input type="text" class="form-control bg-light border-1 small" placeholder="Search for..."-->
<!--                aria-label="Search" aria-describedby="basic-addon2">-->
<!--            <div class="input-group-append">-->
<!--                <button class="btn btn-primary" type="button">-->
<!--                    <i class="fas fa-search fa-sm"></i>-->
<!--                </button>-->
<!--            </div>-->
<!--        </div>-->

<!--    </form>-->
    <br>
<div id="carousel1_indicator" class="slider-home-banner carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carousel1_indicator" data-slide-to="0" class="active"></li>
    <li data-target="#carousel1_indicator" data-slide-to="1"></li>
      <li data-target="#carousel1_indicator" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="static/images/vala.png" alt="First slide">
    </div>
    <div class="carousel-item">
      <img src="static/images/vala.png" alt="Second slide">
    </div>
      <div class="carousel-item">
      <img src="static/images/vala.png" alt="Third slide">
    </div>
  </div>
       <a class="carousel-control-prev" href="#carousel1_indicator" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carousel1_indicator" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>






<!-- ========================= SECTION INTRO END// ========================= -->

<br>
<!-- ========================= SECTION SPECIAL ========================= -->
<div class="container">
<article class="card card-body">


<div class="row">
	<div class="col-md-4">
		<figure class="item-feature">
			<span class="text-primary"><i class="fa fa-2x fa-truck"></i></span>
			<figcaption class="pt-3">
				<h5 class="title">Fast delivery</h5>
				<p>We Offer 1 or 2 day Shipping, at Swiss we ensure that you will always receive your order
                    on time.</p>
			</figcaption>
		</figure> <!-- iconbox // -->
	</div><!-- col // -->
	<div class="col-md-4">
		<figure  class="item-feature">
			<span class="text-primary"><i class="fa fa-2x fa-landmark"></i></span>
			<figcaption class="pt-3">
				<h5 class="title">Creative Strategy</h5>
				<p>Here at Swiss we like to connect with our customers and understand their pain points.
                    We are open to feedback and will try our best to compensate for any issues faced by our
                    customers.
				 </p>
			</figcaption>
		</figure> <!-- iconbox // -->
	</div><!-- col // -->
    <div class="col-md-4">
		<figure  class="item-feature">
			<span class="text-primary"><i class="fa fa-2x fa-lock"></i></span>
			<figcaption class="pt-3">
				<h5 class="title">High secured </h5>
				<p>Our Security Is Top of the Line and we will ensure that your package will arrive
                    to you safely.
				 </p>
			</figcaption>
		</figure> <!-- iconbox // -->
	</div> <!-- col // -->
</div>
</article>
<br>

<!-- ========================= SECTION CONTENT END// ========================= -->

<!-- ========================= WEBSITE MAIN // ========================= -->
    {% if items|length != 0 %}
    <div class="container px-4 px-lg-5 mt-5">
        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
            {% for i in items %}


            <div class="col mb-5">
                <div class="card h-100" style="min-width: 200px; margin: 2px;">
                    <!-- Product image-->
                    <img class="card-img-top" style="height:200px" src="static/images/vala.png" alt="Item Image" />
                    <!-- Product details-->
                    <div class="card-body p-4" style="height: 185px; text-overflow: ellipsis; flex: none;">
                        <div class="text-center">
                            <!-- Product name-->
                            <h5 class="fw-bolder" style="font-weight: bolder; font-size:medium; min-height: 48px; text-decoration: underline; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif">{{i.product_name}}</h5>
                            <!-- Product price-->
                            ${{ "{:.2f}".format(i.price) }}

                            <br>


                        </div>
                    </div>
                    <!-- Product actions-->
                    <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                        <div class="text-center"><button class="btn btn-outline-dark" data-toggle="modal" data-target="#Modal-MoreInfo--{{i.product_id}}">More Info</button>

                        <button class="btn btn-outline mt-auto btn-success" data-toggle="modal" data-target="#Modal-Purchase--{{i.product_id}}">Purchase</button></div>
                        <!-- start of modal (edit Information)-->
                        <div class="modal fade" style="margin-top:100px;" id="itemsedit{{items.product_id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Edit Employee Information</h5>
                                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">×</span>
                                        </button>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- End of modal -->


                    </div>
                </div>
            </div>

            {% endfor %}
    </div>
        {% endif %}




<!-- More Info Modal-->
{% for i in items %}

<div class="modal fade" id="Modal-MoreInfo--{{i.product_id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true" style="margin-top: 100px;">
    <div class="modal-dialog" role="document">
        <div class="modal-content" >
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">{{i.product_name}}</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Name: {{i.product_name}}</p>
                <p>Description: {{i.description}}</p>
                <p>Price: ${{ "{:.2f}".format(i.price) }}</p>

                </div>
                <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>

                </div>
            </div>

        </div>
    </div>


<!--  Purchase Modal  -->
    <div class="modal fade mx-auto" id="Modal-Purchase--{{i.product_id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true" style="margin-top: 100px;">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add {{i.product_name}} to Cart?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <form method="POST" action="{{url_for('add_to_checkout')}}" >
                                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                <div class="modal-body">
                    <hr>
                    <p>Name: {{i.product_name}}</p>
                    <p>Description: {{i.description}}</p>
                    <p>Price: ${{ "{:.2f}".format(i.price) }}</p>
                    <hr>

                  </div>

                   <div class="modal-footer">
                    <input id="uuid" name="product-value" type="hidden" value="{{i.product_id}}">
                    {% if i not in cart %}
                       <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                        <button class="btn btn-success" type="submit">Add to Cart</button>
                    {% elif i in cart %}
                       <button class="btn btn-secondary" type="button" data-dismiss="modal">IN SHOPPING CART</button>
                    {% endif %}
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>


{% endfor %}

{% endblock %}
